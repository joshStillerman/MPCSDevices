# MPCSDevices

A set of MDSplus devices to deal with MPCS data contracts.

To use clone this repo
```
git clone https://github.com/joshStillerman/MPCSDevices.git
```
add the new directory to the MDS_PYDEVICEPATH
```
export MDS_PYDEVICE_PATH="$MDS_PYDEVICE_PATH;$PWD/MPCSDevices"
```
Then you can add a lift_coil device and a pickup_coils device 
to your tree:
```
jas@mfews-jas:~/MPCSDevices$ mdstcl
TCL> edit test /new
TCL> add node topcoil /model=lift_coil
\TEST::TOP:TOPCOIL:GUID TEXT 3cdd2a9a-b2f7-4ff2-b018-4cebbfaaf866
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:DIRECTION TEXT up
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:TURNS NUMERIC 100
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:R NUMERIC 0.05
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:Z NUMERIC 0.07
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:RAW_SHAPE NUMERIC 1
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:PHYS_SHAPE NUMERIC 1
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:RAW_TYPE TEXT float
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:PHYS_TYPE TEXT float
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:RATE NUMERIC 500
\TEST::TOP:TOPCOIL.PARAMETERS.IMMUTTABLE:PHASE NUMERIC 0.0
\TEST::TOP:TOPCOIL.PARAMETERS.MUTTABLE:PS_VOLT NUMERIC 18
\TEST::TOP:TOPCOIL.SIGNALS:DEMAND:HAL TEXT _out := _in * 1. + 0.
\TEST::TOP:TOPCOIL.SIGNALS:MAX_MISSING NUMERIC 1
\TEST::TOP:TOPCOIL.COMMS:TRANSPORT TEXT SDN
\TEST::TOP:TOPCOIL.COMMS:ADDRESS TEXT 244.0.0.0
\TEST::TOP:TOPCOIL.COMMS:PORT NUMERIC 1234
\TEST::TOP:TOPCOIL:CHECK_ACTION ACTION Action(Dispatch('S','CHECK',50,None),Method(None,'CHECK',head))
\TEST::TOP:TOPCOIL:CONF_ACTION ACTION Action(Dispatch('S','CONFIG',50,None),Method(None,'CONFIG',head))
\TEST::TOP:TOPCOIL:START_ACTION ACTION Action(Dispatch('S','PREPULSE',50,None),Method(None,'START',head))
\TEST::TOP:TOPCOIL:STOP_ACTION ACTION Action(Dispatch('S','DONE',50,None),Method(None,'STOP',head))
TCL> add node pickup /model=pickup_coils
\TEST::TOP:PICKUP:GUID TEXT 2656b13a-00d6-4e87-a39e-eeb92cf71b36
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE:RAW_SHAPE NUMERIC 1
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE:PHYS_SHAPE NUMERIC 1
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE:RAW_TYPE TEXT float
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE:PHYS_TYPE TEXT float
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE:RATE NUMERIC 10000
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE:PHASE NUMERIC 0.0
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.FULL_COIL:R NUMERIC 0.05
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.FULL_COIL:Z NUMERIC [.07000000000000001D0,.09D0]
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.FULL_COIL:TURNS NUMERIC [10,10]
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.HALF_COILS:R NUMERIC [.05D0,.05D0]
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.HALF_COILS:Z NUMERIC [.065D0,.065D0]
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.HALF_COILS:TURNS NUMERIC [10,10]
\TEST::TOP:PICKUP.PARAMETERS.IMMUTTABLE.HALF_COILS:PHI NUMERIC [0D0,90D0]
\TEST::TOP:PICKUP.SIGNALS:SELECTORS NUMERIC [0,1,2]
\TEST::TOP:PICKUP.SIGNALS:NAMES TEXT ["top   ","half-1","half-2"]
\TEST::TOP:PICKUP.SIGNALS:FLUX:HAL TEXT _out := _in * [1.,1.,1.] + [0., 0., 0.]
\TEST::TOP:PICKUP.SIGNALS:MAX_MISSING NUMERIC 10
\TEST::TOP:PICKUP.COMMS:TRANSPORT TEXT SDN
\TEST::TOP:PICKUP.COMMS:ADDRESS TEXT 244.0.0.0
\TEST::TOP:PICKUP.COMMS:PORT NUMERIC 1234
\TEST::TOP:PICKUP:CHECK_ACTION ACTION Action(Dispatch('S','CHECK',50,None),Method(None,'CHECK',head))
\TEST::TOP:PICKUP:CONF_ACTION ACTION Action(Dispatch('S','CONFIG',50,None),Method(None,'CONFIG',head))
\TEST::TOP:PICKUP:START_ACTION ACTION Action(Dispatch('S','PREPULSE',50,None),Method(None,'START',head))
\TEST::TOP:PICKUP:STOP_ACTION ACTION Action(Dispatch('S','DONE',50,None),Method(None,'STOP',head))
TCL> add node tof /model=tof_sensors
\TEST::TOP:TOF:GUID TEXT f71fdc7a-affe-4163-b4b1-3951a4f9dc1f
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:RAW_SHAPE NUMERIC [4]
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:PHYS_SHAPE NUMERIC [4]
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:RAW_TYPE TEXT float
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:PHYS_TYPE TEXT float
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:RATE NUMERIC 100
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:PHASE NUMERIC 0.0
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:R NUMERIC [.02D0,.02D0,.02D0,.02D0]
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:Z NUMERIC [.068D0,.068D0,.068D0,.068D0]
\TEST::TOP:TOF.PARAMETERS.IMMUTTABLE:PHI NUMERIC [0D0,90D0,180D0,270D0]
\TEST::TOP:TOF.SIGNALS:HEIGHT:HAL TEXT _out := _in * [1.,1.,1., 1.] + [0., 0., 0., 0.]
\TEST::TOP:TOF.SIGNALS:MAX_MISSING NUMERIC 1
\TEST::TOP:TOF.COMMS:TRANSPORT TEXT SDN
\TEST::TOP:TOF.COMMS:ADDRESS TEXT 244.0.0.0
\TEST::TOP:TOF.COMMS:PORT NUMERIC 1234
\TEST::TOP:TOF:CHECK_ACTION ACTION Action(Dispatch('S','CHECK',50,None),Method(None,'CHECK',head))
\TEST::TOP:TOF:CONF_ACTION ACTION Action(Dispatch('S','CONFIG',50,None),Method(None,'CONFIG',head))
\TEST::TOP:TOF:START_ACTION ACTION Action(Dispatch('S','PREPULSE',50,None),Method(None,'START',head))
\TEST::TOP:TOF:STOP_ACTION ACTION Action(Dispatch('S','DONE',50,None),Method(None,'STOP',head))
TCL> exit
```
